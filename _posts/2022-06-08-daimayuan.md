---
layout: post
title: ä»£ç æºæ¯æ—¥ä¸€é¢˜ div1
date: 2022-06-08
tags: ç®—æ³•ä¸“é¢˜  
---


===

Index
---
<!-- TOC -->

- [div1](#div1)
  - [å­ä¸²çš„æœ€å¤§å·®](#å­ä¸²çš„æœ€å¤§å·®)
  - [åŒºé—´ä¸­ä¸å¤§äºxçš„æ•°çš„æ•°ç›®](#åŒºé—´ä¸­ä¸å¤§äºxçš„æ•°çš„æ•°ç›®)
  - [æ ‘ä¸Šè·¯å¾„å¼‚æˆ–å’Œ](#æ ‘ä¸Šè·¯å¾„å¼‚æˆ–å’Œ)
  - [æœ€å°æˆ–å€¼ç”Ÿæˆæ ‘](#æœ€å°æˆ–å€¼ç”Ÿæˆæ ‘)
  - [ç»Ÿè®¡å­æ•°ç»„å’Œæ¨¡kç­‰äºå­æ•°ç»„é•¿åº¦çš„æ•°é‡](#ç»Ÿè®¡å­æ•°ç»„çš„æ•°é‡)
- [div2](#div2)
  
   
<!-- /TOC -->


## div1

### å­ä¸²çš„æœ€å¤§å·®

å®šä¹‰åºåˆ—çš„æœ€å¤§å·®ä¸ºåºåˆ—ä¸­æœ€å¤§æ•°ä¸æœ€å°æ•°çš„å·®ã€‚æ¯”å¦‚ (3,1,4,5,6) çš„æœ€å¤§å·®ä¸º 6âˆ’1=5 , (2,2) çš„æœ€å¤§å·®ä¸º 2âˆ’2=0 ã€‚

å®šä¹‰ä¸€ä¸ªåºåˆ—çš„å­ä¸²ä¸ºè¯¥åºåˆ—ä¸­è¿ç»­çš„ä¸€æ®µåºåˆ—ã€‚

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º ğ‘› çš„æ•°ç»„ ğ‘1,ğ‘2,â€¦,ğ‘ğ‘›ï¼Œè¯·æ±‚å‡ºè¿™ä¸ªåºåˆ—çš„æ‰€æœ‰å­ä¸²çš„æœ€å¤§å·®ä¹‹å’Œã€‚

+ 1 â‰¤ ğ‘› â‰¤ 500000
+ 0 â‰¤ ğ‘ğ‘– â‰¤ 1e8

**åˆ†æ**

å­åºåˆ—çš„æœ€å¤§æ•°å’Œæœ€å°æ•°ç›¸äº’ç‹¬ç«‹ï¼Œåˆ†åˆ«è®¡ç®—åºåˆ—çš„æ‰€æœ‰å­ä¸²çš„æœ€å¤§å€¼å’Œå’Œæœ€å°å€¼å’Œï¼Œå†æ±‚å·®ã€‚

```c++
long long calc(vector<int> &a){
    int n = a.size();
    auto get = [&](function<bool(int,int)> f) -> long long {
        vector<int> left(n, -1),right(n, n);
        stack<int> sk;
        for (int i = 0; i < n; ++i) {
            while (!sk.empty() && f(a[sk.top()],a[i])) {
                right[sk.top()] = i;
                sk.pop();
            }
            if (!sk.empty()) left[i] = sk.top();
            sk.push(i);
        }
        long long s = 0;
        for (int i = 0; i < n; ++i) {
            s += 1ll * (i - left[i]) * (right[i] - i) * a[i];
        }
        return s;
    };

    return get([&](int x,int y){return x < y;}) - get([&](int x,int y){return x > y;});
}
```

## åŒºé—´ä¸­ä¸å¤§äºxçš„æ•°çš„æ•°ç›®

åœ¨ç»™å®š ğ‘ é•¿çš„æ•°ç»„ {ğ´} ä¸­è¿›è¡Œ ğ‘„ æ¬¡è¯¢é—® [ğ¿ğ‘–,ğ‘…ğ‘–] åŒºé—´ä¸­ä¸å¤§äº ğ»ğ‘– çš„å…ƒç´ ä¸ªæ•°ã€‚

+ 1 <= n <= 100000
+ 1 <= ai <= 1e9

**åˆ†æ**

æˆ‘ä»¬ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤åŒºé—´å’Œï¼Œå°†æ•°ç»„ a å¸¦ç€ä¸‹æ ‡ï¼ŒæŒ‰ç…§å€¼å¤§å°ä»å°åˆ°å¤§æ’åºï¼Œå†å°†æ¯ä¸ªè¯¢é—®ï¼ŒæŒ‰ç…§ h å€¼ä»å°åˆ°å¤§æ’åºã€‚ç„¶åæˆ‘ä»¬éå†æ¯ä¸ªè¯¢é—®ï¼Œå¯¹äºå½“å‰çš„ hï¼Œå°†æ•°ç»„ a ä¸­å°äºç­‰äºçš„ h çš„æ•°çš„ä¸‹æ ‡ pos è¿›è¡Œ add(pos,1), è¿™ä¸ªè¯¢é—®çš„ç­”æ¡ˆå°±æ˜¯ ask(r)-ask(l-1);

```c++
vector<int> calc(vector<int>& a, vector<vector<int>>& qs) {
    int n = a.size(), m = qs.size();
    vector<int> ans(m), tr(n);

    auto add = [&](int c, int x) {
        for (; c <= n; c += c & -c) tr[c - 1] += x;
    };

    auto ask = [&](int c) {
        int s = 0;
        for (; c; c -= c & -c) s += tr[c - 1];
        return s;
    };

    vector<array<int,2>> v;
    vector<array<int,4>> q;
    for (int i = 0; i < n; ++i) 
        v.push_back({a[i], i + 1});
    for (int i = 0; i < m; ++i) 
        q.push_back({qs[i][0], qs[i][1], qs[i][2], i});
    sort(v.begin(), v.end(), [&](array<int,2> x, array<int,2> y){return x[0] < y[0];});
    sort(q.begin(), q.end(), [&](array<int,4> x, array<int,4> y){return x[2] < y[2];});

    for (int i = 0, j = 0; i < m; ++i) {
        while (j < n && v[j][0] <= q[i][2]) 
            add(v[j++][1], 1);
        ans[q[i][3]] = ask(q[i][1]) - ask(q[i][0] - 1);
    }
    return ans;
}
```

### æ ‘ä¸Šè·¯å¾„å¼‚æˆ–å’Œ

ç»™å‡º ğ‘› ä¸ªç‚¹çš„ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªç‚¹æœ‰å„è‡ªçš„ç‚¹æƒï¼Œå¤šæ¬¡è¯¢é—®ä¸¤ä¸ªç‚¹ç®€å•è·¯å¾„æ‰€æ„æˆç‚¹é›†çš„å¼‚æˆ–å’Œã€‚

**è¾“å…¥æ ¼å¼**
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°å­— ğ‘› å’Œ ğ‘š , ğ‘› è¡¨ç¤ºç‚¹æ•°ï¼Œğ‘š è¡¨ç¤ºè¯¢é—®æ¬¡æ•° ã€‚

æ¥ä¸‹æ¥ä¸€è¡Œ ğ‘› ä¸ªæ•´æ•° ğ‘1,ğ‘2,â€¦,ğ‘ğ‘› ï¼Œè¡¨ç¤ºæ¯ä¸ªç‚¹çš„ç‚¹æƒã€‚

æ¥ä¸‹æ¥ ğ‘›âˆ’1 è¡Œ , æ¯è¡Œä¸¤ä¸ªæ•´æ•° ğ‘¢,ğ‘£ ï¼Œè¡¨ç¤ºç‚¹ ğ‘¢ å’Œç‚¹ ğ‘£ ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚

å†æ¥ä¸‹æ¥ ğ‘š è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° ğ‘¢,ğ‘£ ï¼Œè¡¨ç¤ºè¯¢é—®ç‚¹ ğ‘¢ åˆ°ç‚¹ ğ‘£ çš„ç®€å•è·¯å¾„æ‰€æ„æˆç‚¹é›†çš„å¼‚æˆ–å’Œã€‚

**è¾“å‡ºæ ¼å¼**
è¾“å‡º ğ‘š è¡Œï¼Œå¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºä¸€è¡Œã€‚


+ 1 <= n,m <= 200000
+ 1 <= ai <= 1e6

**åˆ†æ**

ç°æ±‚å‡ºæ¯ä¸ªç‚¹åˆ°è·ŸèŠ‚ç‚¹çš„è·¯å¾„å¼‚æˆ–å€¼ï¼Œåˆ™ä¸¤ä¸ªç‚¹çš„è·¯å¾„å¼‚æˆ–å€¼ç­‰äºä¸¤ä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„å¼‚æˆ–å€¼å¼‚æˆ–ä¸Šæœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

```c++
void solve(){
    cin >> n >> m;
    vector<int> a(n),sum(n);
    rd(a);
    LCA g(n);

    for(int i = 0; i < n-1; ++i){
        cin>>x>>y;
        x--,y--;
        g.add_edge(x,y);
    }

    function<void(int,int)> dfs=[&](int u, int fa){
        if(fa==-1) sum[u]=a[u];
        else sum[u]=sum[fa]^a[u];
        for (auto v : g.g[u]) {
            if (v != fa) {
                dfs(v, u);
            }
        }
    };
    dfs(0,-1);
    g.complete();

    while(m--){
        cin>>x>>y;
        x--,y--;
        int u=g.lca(x,y);
        int t=sum[x]^sum[y]^a[u];
        cout<<t<<"\n";
    }
}
```


### æœ€å°æˆ–å€¼ç”Ÿæˆæ ‘

ç»™å‡ºğ‘›ä¸ªç‚¹ï¼Œ ğ‘šæ¡è¾¹çš„æ— å‘å›¾ï¼Œ æ¯æ¡è¾¹è¿æ¥ğ‘¢,ğ‘£ä¸¤ä¸ªç«¯ç‚¹ï¼Œè¾¹æƒä¸ºğ‘¤ï¼Œ æ±‚å›¾çš„ç”Ÿæˆæ ‘çš„æœ€å°ä»£ä»·ã€‚

åœ¨è¿™é“é¢˜ä¸­ï¼Œ æˆ‘ä»¬å®šä¹‰ä¸€æ£µç”Ÿæˆæ ‘çš„ä»£ä»·ä¸ºä»–æ‰€æœ‰è¾¹çš„è¾¹æƒæŒ‰ä½æˆ–å¾—åˆ°çš„å€¼ã€‚

+ 1 <= u,v <= 2e5
+ n - 1 <= m <= 4e5
+ 1 <= w <= 1e9

**åˆ†æ**

è´ªå¿ƒ + å¹¶æŸ¥é›†

ä»é«˜ä½åˆ°ä½ä½ï¼Œåˆ¤æ–­æŸä¸€ä½èƒ½å¦å–0,ä½¿ç”¨å¹¶æŸ¥é›†åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿæˆæ ‘ã€‚

å‡è®¾æˆ‘ä»¬å‰é¢ç¡®å®šäº†è¿™äº›ä½æ„æˆçš„æ•°ä½resï¼Œä¸”å½“å‰æ˜¯ç¬¬k ä½ï¼Œæˆ‘ä»¬å‡è®¾å½“å‰ä½å–0 ï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„è¾¹ä¼šä¼šåœ¨æˆ‘ä»¬çš„ç­”æ¡ˆä¸­å‘¢ï¼Œé¦–å…ˆè¿™ä¸ªè¾¹è¾¹æƒvçš„ç¬¬kä½ä¸€å®šæ˜¯0 ï¼Œå¦åˆ™ä¸€æˆ–ä¼šä½¿è¿™ä¸€ä½ä½1ï¼Œç”±äºåé¢çš„ä½ä¸ç¡®å®šå› æ­¤åé¢å–ä»€ä¹ˆéƒ½è¡Œï¼Œä½†æ˜¯å‰é¢ä¸€å®šè¦ç¬¦åˆæˆ‘ä»¬å‰é¢çš„reså³è¿™æ¡è¾¹æˆ–å®Œresï¼Œç¬¬kä½ä¹‹å‰çš„ä½ç½®å’Œresä¸­åº”è¯¥ç›¸åŒï¼Œä¸åŒçš„è¯ä»£è¡¨è¿™æ¡è¾¹åœ¨å‰é¢è´ªå¿ƒçš„æ—¶å€™å°±å»é™¤äº†ï¼Œè¦åˆ¤æ®µèƒ½å¦ç”Ÿæˆæ ‘ï¼Œç›´æ¥åˆ¤æ–­æœ€åè¿™ä¸ªå›¾æ˜¯å¦è¿é€šå³å¯ã€‚


```c++
const int N = 2e5 + 5;

int f[N];
int find(int x) {
    return x == f[x] ? x : f[x] = find(f[x]);
}

int n,m,x,y,k,q,res;
void solve(){
    cin>>n>>m;
    vector<array<int, 3>> a(m);
    for(int i=0;i<m;++i){
        cin>>a[i][0]>>a[i][1]>>a[i][2];
        a[i]={x,y,k};
    }
    
    auto chk = [&](int k)->bool{
        iota(f+1,f+n+1,1);
        int x=res,cnt = 0;
        for(int i=0;i<m;++i){
            int t=(1<<k)-1;
            t&=a[i][2];
            t|=x;
            if((a[i][2]>>k&1)==0&&t==(x|a[i][2])) {
                f[find(a[i][0])]=find(a[i][1]);
            }
        }
        for (int i=1;i<=n;++i){
            if(i==f[i]) cnt++;
        }
        return cnt!=1;
    };
 
    for(int i=30;~i;--i){
        if(chk(i)) res |= (1 << i);
    }
    cout << res << "\n";
}
```

### ç»Ÿè®¡å­æ•°ç»„çš„æ•°é‡

ç»™å®šé•¿åº¦ä¸ºnçš„æ•°ç»„aå’Œk, å¦‚æœä¸€ä¸ªå­æ•°ç»„å’Œé™¤ä»¥kçš„ä½™æ•°æ­£å¥½ç­‰äºå­æ•°ç»„é•¿åº¦,åˆ™ç§°å…¶ä¸ºå¥½å­æ•°ç»„ï¼Œç»Ÿè®¡å¥½å­æ•°ç»„çš„æ•°é‡ã€‚

+ 1 <= n <= 2e5
+ 1 <= k, a[i] <= 1e9

**åˆ†æ**

+ æ˜¾ç„¶å­æ•°ç»„é•¿åº¦å°äºkï¼Œå› ä¸ºæ¨¡kçš„èŒƒå›´åœ¨[0,k-1]

æ ¹æ®æ¡ä»¶ï¼š

```
 (a[i] + a[i+1] + ,,, + a[j]) % k = j - i + 1
```

è®¾ s ä¸º a çš„å‰ç¼€å’Œæ•°ç»„ï¼Œåˆ™ä¸Šå¼å˜ä¸º:
    
```
(s[j] - s[i - 1]) % k = j - i + 1
```

å³ï¼š

```
(s[j] - j) % k = (s[i - 1] - (i - 1)) % k
```

ä½¿ç”¨mapç»Ÿè®¡å³å¯ï¼Œæ³¨æ„å­æ•°ç»„é•¿åº¦è¦å°äºkã€‚

```c++
long long countSubarrays(vector<int> &a, int k) {
    int n = a.size();
    vector<int> s(n + 1);
    map<int, int> cnt;

    for (int i = 0; i < n; ++i) {
        s[i + 1] = (s[i] + a[i]) % k;
    }
    long long ans = 0;
    for (int i = 0; i <= n; ++i) {
        if (i >= k) cnt[((s[i-k] - i)%k + k)%k]--;
        ans += cnt[((s[i] - i)%k + k)%k];
        cnt[((s[i] - i)%k + k)%k]++;
    }
    return ans;
}
```

## div2
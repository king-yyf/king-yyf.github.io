---
layout: post
title: 算法竞赛中的结论和公式
date: 2021-04-29
tags: 算法专题   
---

记录算法题中能用到的数学公式和结论，遇到新的再补充。

===

Index
---
<!-- TOC -->

- [数论](#数论)
- [排列组合](#排列组合)
- [概率](#概率)
- [数列与递推](#数列)
  - [等差与等比数列](#等差与等比数列)
  - [错位排列](#错位排列)
  - [第一类stirling数](#第一类stirling数)
  - [第二类stirling数](#第二类stirling数)
  - [卡塔兰(catalan)数列](#卡塔兰(catalan)数列)
  - [分平面的最大区域数](#分平面的最大区域数)

<!-- /TOC -->

## 数论

**乘法逆元**

在取模的情况下

(a / b) mod c =  a * (b的逆元) mod c

特殊的，当 b 位质数时， `(a / b) mod c = a * b ^ (c - 2) mod c` 


- 给定两个正整数 n 和 m， n和m **互质**， 求n和m的线性组合中，不能组合出的最大数字

**答案**：`n * m - n - m`

- 一个数各位数字之和能被 3 整除，则这个数能被3整除，一个数各位数字之和能被 9 整除，则这个数能被9整除。

- 如果一个整数的奇数位数字之和与偶位数数字之和之差能被11整除，那么这个数能被11整除。

- 如果一个数末三位与末三位以前的数字合成数之差能被7,11,或13整除，那么这个数能被7，11或13整除。

- 求一组分数的最大公约数

**答案**：求出各个分数分母的最小公倍数a,各个分子的最大公约数b,则 `b/a` 即为所求。

-  求一组分数的最小公倍数

**答案**：求出各个分数分母的最大公约数a,各个分子的最小公倍数b,则 `b/a` 即为所求。




## 排列组合

1. 定义一个非负整数是不降数，当且仅当它的各位数字从高位到低位单调不降。
   例如，1111, 1234都是不降数，请你求出恰好n位的不降数的个数。

   **数据范围:** `1 <= n <= 1e8`

**答案**: 

考虑先算低于 n 位的数字有多少。我们把数字看成长为 n 的序列，然后统计差分序列的数量即可。考虑枚举差分序列之和 i，然后通过插板法，可以得到答案是：

**答案：** `combi(n + 8, 8)` 



## 概率


## 数列

### 等差与等比数列

1. 等差数列通项公式 a_n = a_1 + (n-1)*d 

2. 等差数列前n项和公式 S_n = n(a_1 + a_n) / 2 = na_1 + n(n-1)d/2

3. 等比数列通项公式 a_n = a_1q^{n-1} = a_1 q^n / q

4. 等比数列前n项和 s_n = a_1(1-q^n)/(1-q)

### 错位排列:
  在书架上放有编号为1，2，...，n的n本书。现将n本书全部取下然后再放回去，当放回去时
要求每本书都不能放在原来的位置上。求满足以上条件的放法共有多少种?

**递推公式1:**  a_1 = 0, a_2 = 1, a_n = (n-1)(a_{n-2} + a_{n-1})  

**递推公式2:**  a_1 = 0, a_n = n*a_{n-1} + (-1)^{n-2}


### 第一类stirling数

第一类斯特林数表示表示将 n 个不同元素构成m个圆排列的数目.

**第一类斯特林数** 把N个不同元素分为k个环，每个环非空，问有多少分法，记为S(p,k)
S(p,p) = 1, S(p,0) = 0

递推公式： `S(p,k) = (p - 1) * S(p-1, k) + s(p - 1, k - 1)`

p个人排k个圈，一种方法是，第k个圈只有p自己, 其数目为 s(p-1, k-1). 还有一种方法是
p加入p-1人组成得k个圈，排在任意一个人的左边，其数目为 `(p-1)*S(p-1,k)` .


**实例**
- 设f(i,j)表示i个数的排列，存在j个数，在它们前面没有比他们大的数。考虑最小的数放在哪，可以得到递推式：f(i,j)=f(i-1,j-1)+(i-1)*f(i-1,j)。


**例题**

[leetcode 5762](https://leetcode-cn.com/problems/number-of-ways-to-rearrange-sticks-with-k-sticks-visible/submissions/)

```c++
class Solution {
public:
    using ll = long long;
    const ll mod = 1e9 + 7;
    int rearrangeSticks(int n, int k) {
        vector<vector<ll>> f(n + 1, vector<ll>(n + 1));
        f[1][1] = 1;
        for (int i = 2; i <= n; ++i)
            for (int k = 1; k <= i; ++k) 
                f[i][k] = (f[i-1][k]*(i-1) + f[i-1][k-1]) % mod;
        return f[n][k];
    }
};
```


### 第二类stirling数

s(n,k)表示含n个元素的集合划分为k个集合的情况数。

**递推公式**: `s(n,k)=s(n-1,k-1)+k·s(n-1,k)，1≤k<n`

### 卡塔兰(catalan)数列

**实例：**
- 有 2n 个人排成一行进入剧场。入场费 5 元。其中只有 n 个人有一张 5 元钞票，另外 n 人只有 10 元钞票，剧院无其它钞票，问有多少中方法使得只要有 10 元的人买票，售票处就有 5 元的钞票找零?
- 一位大城市的律师在她住所以北 n 个街区和以东 n 个街区处工作。每天她走 2n 个街区去上班。如 果他从不穿越(但可以碰到)从家到办公室的对角线，那么有多少条可能的道路?
- 在圆上选择 2n 个点，将这些点成对连接起来使得所得到的 n 条线段不相交的方法数?
- n 个结点可构造多少个不同的二叉树?
- 一个栈(无穷大)的进栈序列为 1，2，3，...n，有多少个不同的出栈序列?
- 将一个凸多边形区域分成三角形区域的方法数?
- 一个乘法算式 P=a1a2a3...an，在保证表达式合法的前提下(某个数不会被括号括两次，如“((a))” 是错误的)，有多少种添加括号的方法?

**通项公式** ： a_n = C(2n, n) / (n + 1)

**递推公式**： a_1 = 1, a_n = 2(2n-1) / (n+1) , n >= 2

### 分平面的最大区域数

1. n条直线分平面的最大区域数的序列为:2，4，7，11，...
    递推公式:f_n=f_{n-1}+n
    通项公式:f_n=n(n+1)/2+1

2. n条折线分平面的最大区域数的序列为:2，7，16，29，...
    递推公式: `f_n=f_{n-1}+4n-3`
    通项公式: `f_n=(n-1)(2n-1)+2n`

3. n条封闭曲线(如一般位置上的圆)分平面的最大区域数的序列为:2，4，8，14，...
    递推公式: `f_n=f_{n-1}+2(n-1)`
    通项公式: `f_n=n^2-n+2`